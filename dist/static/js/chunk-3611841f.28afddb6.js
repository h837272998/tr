(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3611841f"],{"102f":function(e,t,r){},"3d31":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"resource-container"},[r("div",{staticClass:"search-container"},[r("el-input",{staticClass:"input-with-select",staticStyle:{width:"50%"},attrs:{placeholder:"请输入搜索内容"},model:{value:e.searchForm.searchInput,callback:function(t){e.$set(e.searchForm,"searchInput",t)},expression:"searchForm.searchInput"}},[r("el-select",{staticStyle:{width:"8em"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.searchForm.select,callback:function(t){e.$set(e.searchForm,"select",t)},expression:"searchForm.select"}},[r("el-option",{attrs:{label:"全部",value:"all"}}),e._v(" "),r("el-option",{attrs:{label:"标题",value:"title"}})],1)],1),e._v(" "),r("el-button",{attrs:{slot:"append",type:"primary",icon:"el-icon-search",circle:""},on:{click:e.handleSearch},slot:"append"})],1),e._v(" "),r("div",{staticClass:"table-container"},[r("div",{staticClass:"head-container"},[r("el-button",{staticStyle:{margin:"10px 10px 0 20px"},attrs:{type:"primary",size:"small"},on:{click:e.handlePublice}},[e._v("发 帖")]),e._v(" "),r("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{background:"","current-page":e.url.current,"page-size":20,total:e.total,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.url,"current",t)},"update:current-page":function(t){return e.$set(e.url,"current",t)},"current-change":e.handCurrentChange}})],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",padding:"0px 10px 10px 10px"},attrs:{size:"small",data:e.tableData,"cell-class-name":e.tableCell}},[r("el-table-column",{attrs:{prop:"articleTitle",label:"标题","min-width":"500px"},scopedSlots:e._u([{key:"header",fn:function(t){t.row;return[r("el-link",{on:{click:function(t){e.url.orderBy="create_time"}}},[e._v("最新 ")]),e._v(" "),r("el-link",{on:{click:function(t){e.url.orderBy="now_heat"}}},[e._v("热门 ")]),e._v(" "),r("el-popover",{attrs:{trigger:"click",placement:"right"}},[r("el-row",[e._v(" 排序:\n                "),r("el-link",{attrs:{size:"mini",type:e.generateLinkType("create_time")},on:{click:function(t){e.url.orderBy="create_time"}}},[e._v("发帖时间")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkType("discuss_number")},on:{click:function(t){e.url.orderBy="discuss_number"}}},[e._v("回复/查看")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkType("click_number")},on:{click:function(t){e.url.orderBy="click_number"}}},[e._v("查看")])],1),e._v(" "),r("el-row",[e._v(" 时间:\n                "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline("")},on:{click:function(t){e.url.dateline=""}}},[e._v("全部时间")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline(24)},on:{click:function(t){e.url.dateline=24}}},[e._v("一天")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline(48)},on:{click:function(t){e.url.dateline=48}}},[e._v("两天")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline(168)},on:{click:function(t){e.url.dateline=168}}},[e._v("一周")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline(720)},on:{click:function(t){e.url.dateline=720}}},[e._v("一个月")]),e._v(" "),r("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),r("el-link",{attrs:{size:"mini",type:e.generateLinkDateline(2160)},on:{click:function(t){e.url.dateline=2160}}},[e._v("三个月")])],1),e._v(" "),r("el-link",{attrs:{slot:"reference"},slot:"reference"},[e._v("更多"),r("i",{staticClass:"el-icon-caret-right"}),e._v(" ")])],1),e._v(" "),r("el-popover",{staticStyle:{width:"400px"},attrs:{trigger:"click",placement:"right"}},[r("el-cascader",{staticStyle:{width:"400px"},attrs:{options:e.infoOptions,props:e.subProps,filterable:"",clearable:""},model:{value:e.infoValue,callback:function(t){e.infoValue=t},expression:"infoValue"}}),e._v(" "),r("el-link",{attrs:{slot:"reference"},slot:"reference"},[e._v("信息"),r("i",{staticClass:"el-icon-caret-right"}),e._v(" ")])],1)]}},{key:"default",fn:function(t){var n=t.row;return[r("div",{staticStyle:{"vertical-align":"baseline"}},[r("el-link",{attrs:{underline:!1,href:"/#/article/"+n.id,target:"_blank"}},[r("img",{attrs:{title:"新窗口打开",src:"/image/resource/folder_common.gif"}})]),e._v(" "),r("el-link",[e._v("[")]),e._v(" "),r("el-link",{attrs:{href:e.generateRegionHref(n.region),type:e.generateRegionColor(n.region)}},[e._v(e._s(e.regionMap[n.region]))]),e._v(" "),r("el-link",[e._v("]")]),e._v("  \n              "),r("el-link",{attrs:{href:"/article/"+n.id}},[e._v("\n                "+e._s(n.articleTitle)+"\n              ")]),e._v("\n               "),e._l(n.categories,(function(t){return r("el-tag",{staticStyle:{padding:"1px 1px 1px 1px","font-size":"8px"},attrs:{type:e.generateTagType(t.name),size:"mini"}},[e._v(e._s(t.name))])})),e._v(" "),n.isLogged?r("el-tag",{staticStyle:{padding:"1px 1px 1px 1px","font-size":"10px"},attrs:{title:"登录可看",type:"danger",size:"mini"}},[r("i",{staticClass:"el-icon-lock"})]):e._e(),e._v(" "),n.nowHeat>=e.heat?r("img",{attrs:{src:"/image/resource/hot_3.gif",title:"热度:"+n.nowHeat}}):e._e()],2)]}}])}),e._v(" "),r("el-table-column",{staticStyle:{"word-break":"break-all"},attrs:{label:"信息",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",{staticClass:"author"},[n.subordinates.collegeName?r("el-link",{staticStyle:{"font-size":"8px"},attrs:{type:"primary"},on:{click:function(t){e.url.collegeId=n.subordinates.collegeId}}},[e._v(e._s(n.subordinates.collegeName))]):e._e(),e._v(" "),n.subordinates.majorName?r("el-link",{staticStyle:{"font-size":"8px"},attrs:{type:"primary"},on:{click:function(t){e.url.majorId=n.subordinates.majorId}}},[e._v(e._s(n.subordinates.majorName))]):e._e(),e._v(" "),n.subordinates.courseName?r("el-link",{staticStyle:{"font-size":"8px"},attrs:{type:"primary"},on:{click:function(t){e.url.courseId=n.subordinates.courseId}}},[e._v(e._s(n.subordinates.courseName))]):e._e()],1)]}}])}),e._v(" "),r("el-table-column",{staticStyle:{"word-break":"break-all"},attrs:{label:"作者",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",{staticClass:"author"},[r("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"click"}},[r("el-link",{staticStyle:{"line-height":"14px","font-size":"12px"},attrs:{slot:"reference",type:"primary"},on:{click:function(e){n.popover=!0}},slot:"reference"},[e._v(e._s(n.author))]),e._v(" "),n.popover?r("user-dialog",{attrs:{username:n.authorUsername}}):e._e()],1),e._v(" "),r("br"),e._v(" "),r("em",{staticStyle:{"line-height":"14px"}},[e._v(e._s(e._f("parseTime")(n.createTime,"{y}-{m}-{d}")))])],1)]}}])}),e._v(" "),r("el-table-column",{staticStyle:{"word-break":"break-all"},attrs:{label:"回复/查看",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",{staticClass:"author"},[r("el-link",{staticStyle:{"font-size":"12px"},attrs:{type:"primary",underline:!1}},[e._v(e._s(n.discussNumber))]),r("br"),e._v(" "),r("em",[e._v(e._s(n.clickNumber))])],1)]}}])}),e._v(" "),r("el-table-column",{staticStyle:{"word-break":"break-all"},attrs:{label:"最后发表",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",{staticClass:"author"},[r("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"click"}},[r("el-link",{staticStyle:{"line-height":"14px","font-size":"12px"},attrs:{slot:"reference",type:"primary"},on:{click:function(e){n.lastPopover=!0}},slot:"reference"},[e._v(e._s(n.lastDiscussUsername))]),e._v(" "),n.lastPopover?r("user-dialog",{attrs:{username:n.lastDiscussUsername}}):e._e()],1),r("br"),e._v(" "),r("span",{staticStyle:{"font-size":"10px"},attrs:{title:n.lastDiscussTime}},[e._v(e._s(e._f("formatTime")(n.lastDiscussTime)))])],1)]}}])}),e._v(" "),r("div",{staticStyle:{"text-align":"center"},attrs:{slot:"append"},slot:"append"},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.appendLoading,expression:"appendLoading"}],attrs:{text:"加载中..."}}),e._v(" "),r("el-button",{staticStyle:{width:"100%"},on:{click:e.nextPage}},[e._v("下一页")])],1)],1),e._v(" "),r("div",{staticClass:"head-container"},[r("el-button",{staticStyle:{margin:"10px 10px 0 20px"},attrs:{type:"primary",size:"small"},on:{click:e.handlePublice}},[e._v("发 帖")]),e._v(" "),r("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{background:"","current-page":e.url.current,"page-size":20,total:e.total,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(t){return e.$set(e.url,"current",t)},"update:current-page":function(t){return e.$set(e.url,"current",t)},"current-change":e.handCurrentChange}})],1)],1)])},a=[],i=(r("7f7f"),r("333d")),o=r("2423"),l=r("ed08"),c=r("72bf"),s=r.n(c),u=r("50cc"),p=r("16fa"),d={name:"Communicate",components:{UserDialog:p["a"],Pagination:i["a"]},filters:{parseTime:l["e"],formatTime:l["c"]},data:function(){var e={"-1":"学生","-2":"教师"};return{searchForm:{select:"",searchInput:""},heat:"",tableData:[],regionMap:e,url:{current:this.$route.query&&this.$route.query.current||1,orderBy:this.$route.query&&this.$route.query.orderBy||"create_time",region:this.generateRegion(),collegeId:"",majorId:"",courseId:"",dateline:"",mregion:"0"},pages:1,total:0,loading:!0,appendLoading:!1,lock:!1,infoValue:[],infoOptions:[],subProps:{lazy:!0,checkStrictly:!0,lazyLoad:function(e,t){var r=e.level,n=e.data;console.info(r),1===r&&Object(u["e"])(n.value).then((function(e){if(e.data){var n=e.data.map((function(e){return{label:e.majorName,value:e.id,leaf:r>=2}}));t(n)}else t(!1)})),2===r&&Object(u["c"])(n.value).then((function(e){if(e.data){var n=e.data.map((function(e){return{label:e.courseName,value:e.id,leaf:r>=2}}));t(n)}else t(!1)}))}}}},watch:{url:{deep:!0,handler:function(e){this.lock||(this.toggleUrl(e),this.refreshTable())}},infoValue:{deep:!0,handler:function(e){this.lock||(this.url.collegeId=e[0]||"",this.url.majorId=e[1]||"",this.url.courseId=e[2]||"")}}},created:function(){var e=this;console.info(111),Object(o["m"])().then((function(t){e.heat=t.data})),this.toggleUrl(this.url),Object(o["i"])(this.url).then((function(t){e.tableData=[],t.data.records.map((function(t){t.popover=!1,t.lastPopover=!1,e.tableData.push(t)})),e.url.current=t.data.current,e.total=t.data.total,e.loading=!1})),this.generateOptions()},methods:{handCurrentChange:function(e){},generateRegionColor:function(e){var t={"-1":"success","-2":"primary"};return t[e]},generateRegionHref:function(e){var t={0:"/resourceRegion/elective",1:"/resourceRegion/student",2:"/resourceRegion/teacher"};return t[e]?t[e]:"/resourceRegion/all"},tableCell:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background-color: #4edb9b"},nextPage:function(){var e=this;this.url.current>this.pages||(this.lock=!0,this.appendLoading=!0,this.url.current=this.url.current+1,Object(o["i"])(this.url).then((function(t){t.data.records.map((function(t){t.popover=!1,t.lastPopover=!1,e.tableData.push(t)})),e.url.current=t.data.current,e.total=t.data.total,e.pages=t.data.pages,e.loading=!1,e.appendLoading=!1,e.lock=!1})).catch((function(t){e.lock=!1})))},refreshTable:function(){var e=this;this.loading=!0,Object(o["i"])(this.url).then((function(t){e.tableData=[],t.data.records.map((function(t){t.popover=!1,t.lastPopover=!1,e.tableData.push(t)})),e.url.current=t.data.current,e.total=t.data.total,e.pages=t.data.pages,e.loading=!1,e.appendLoading=!1}))},toggleUrl:function(e){var t=s.a.parseUrl(window.location.href),r=s.a.stringifyUrl({url:t.url,query:e});history.pushState({},"",r)},generateRegion:function(){var e={All:"",Elective:0,Student:1,Teacher:2},t=this.$route.query&&this.$route.query.region;return this.$route.query&&this.$route.query.region?t:e[this.$route.name]},generateLinkType:function(e){var t=this.url.orderBy===e;return t?"primary":"default"},generateLinkDateline:function(e){var t=this.url.dateline===e;return t?"primary":"default"},generateOptions:function(){var e=this;Object(u["b"])().then((function(t){t.data&&(e.infoOptions=t.data.map((function(e){return{value:e.id,label:e.collegeName}})))}))},handleSearch:function(){var e=this.searchForm.searchInput,t=this.$router.resolve({path:"/resourceRegion/search?filed=".concat(this.searchForm.select,"&search=").concat(e)});window.open(t.href,"_blank")},handlePublice:function(){var e=this.$router.resolve({path:"/personal/operate/communicate"});window.open(e.href,"_blank")}}},f=d,g=(r("a385"),r("2877")),v=Object(g["a"])(f,n,a,!1,null,null,null);t["default"]=v.exports},"3e67":function(e,t,r){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)},"50cc":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return c}));var n=r("b775");function a(){return Object(n["a"])({url:"/r/colleges",method:"get"})}function i(e){return Object(n["a"])({url:"/r/colleges/major/".concat(e),method:"get"})}function o(e){return Object(n["a"])({url:"/r/colleges/course/".concat(e),method:"get"})}function l(e){return Object(n["a"])({url:"/r/colleges/com/".concat(e),method:"get"})}function c(e){return Object(n["a"])({url:"/r/colleges/addCourse",method:"post",data:e,headers:{"Content-Type":"application/json"}})}},"72bf":function(e,t,r){"use strict";const n=r("3e67"),a=r("f234"),i=r("f32c");function o(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const a=r.length;return void 0===n||e.skipNull&&null===n?r:null===n?[...r,[s(t,e),"[",a,"]"].join("")]:[...r,[s(t,e),"[",s(a,e),"]=",s(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n?r:null===n?[...r,[s(t,e),"[]"].join("")]:[...r,[s(t,e),"[]=",s(n,e)].join("")];case"comma":case"separator":return t=>(r,n)=>null===n||void 0===n||0===n.length?r:0===r.length?[[s(t,e),"=",s(n,e)].join("")]:[[r,s(n,e)].join(e.arrayFormatSeparator)];default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n?r:null===n?[...r,s(t,e)]:[...r,[s(t,e),"=",s(n,e)].join("")]}}function l(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const a="string"===typeof r&&r.split("").indexOf(e.arrayFormatSeparator)>-1,i=a?r.split(e.arrayFormatSeparator).map(t=>u(t,e)):null===r?r:u(r,e);n[t]=i};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}function c(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function u(e,t){return t.decode?a(e):e}function p(e){return Array.isArray(e)?e.sort():"object"===typeof e?p(Object.keys(e)).sort((e,t)=>Number(e)-Number(t)).map(t=>e[t]):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}function g(e){e=d(e);const t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function v(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function h(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),c(t.arrayFormatSeparator);const r=l(t),n=Object.create(null);if("string"!==typeof e)return n;if(e=e.trim().replace(/^[?#&]/,""),!e)return n;for(const a of e.split("&")){let[e,o]=i(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:"comma"===t.arrayFormat?o:u(o,t),r(u(e,t),o,n)}for(const a of Object.keys(n)){const e=n[a];if("object"===typeof e&&null!==e)for(const r of Object.keys(e))e[r]=v(e[r],t);else n[a]=v(e,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((e,t)=>{const r=n[t];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?e[t]=p(r):e[t]=r,e},Object.create(null))}t.extract=g,t.parse=h,t.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),c(t.arrayFormatSeparator);const r=o(t),n=Object.assign({},e);if(t.skipNull)for(const i of Object.keys(n))void 0!==n[i]&&null!==n[i]||delete n[i];const a=Object.keys(n);return!1!==t.sort&&a.sort(t.sort),a.map(n=>{const a=e[n];return void 0===a?"":null===a?s(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):s(n,t)+"="+s(a,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>({url:d(e).split("?")[0]||"",query:h(g(e),t)}),t.stringifyUrl=(e,r)=>{const n=d(e.url).split("?")[0]||"",a=t.extract(e.url),i=t.parse(a),o=f(e.url),l=Object.assign(i,e.query);let c=t.stringify(l,r);return c&&(c=`?${c}`),`${n}${c}${o}`}},a385:function(e,t,r){"use strict";var n=r("102f"),a=r.n(n);a.a},f234:function(e,t,r){"use strict";var n="%[a-f0-9]{2}",a=new RegExp(n,"gi"),i=new RegExp("("+n+")+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(a){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function l(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(a),r=1;r<t.length;r++)e=o(t,r).join(""),t=e.match(a);return e}}function c(e){var t={"%FE%FF":"��","%FF%FE":"��"},r=i.exec(e);while(r){try{t[r[0]]=decodeURIComponent(r[0])}catch(s){var n=l(r[0]);n!==r[0]&&(t[r[0]]=n)}r=i.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var c=a[o];e=e.replace(new RegExp(c,"g"),t[c])}return e}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return c(e)}}},f32c:function(e,t,r){"use strict";e.exports=(e,t)=>{if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}}}]);