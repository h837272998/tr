(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55717207"],{"62da":function(e,t,r){},"83ee":function(e,t,r){"use strict";var a=r("62da"),o=r.n(a);o.a},d5c2:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("el-row",[r("el-col",{attrs:{offset:1}},[r("Mallki",{staticStyle:{"font-size":"18px"},attrs:{text:"注册账号"}})],1)],1),e._v(" "),r("br"),e._v(" "),r("br"),e._v(" "),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"rform",staticClass:"container",attrs:{model:e.rform,"status-icon":"",rules:e.rules,"label-position":"right","label-width":"70px"}},[r("el-form-item",{attrs:{prop:"username",label:"账号"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入账号"},model:{value:e.rform.username,callback:function(t){e.$set(e.rform,"username",t)},expression:"rform.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password",label:"密码"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码","show-password":""},model:{value:e.rform.password,callback:function(t){e.$set(e.rform,"password",t)},expression:"rform.password"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"mobile",label:"手机号"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.rform.mobile,callback:function(t){e.$set(e.rform,"mobile",t)},expression:"rform.mobile"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"validcode",label:"验证码"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"请输入验证码"},model:{value:e.rform.validcode,callback:function(t){e.$set(e.rform,"validcode",t)},expression:"rform.validcode"}})],1),e._v(" "),r("el-col",{attrs:{span:6,offset:4}},[r("el-button",{attrs:{type:"primary",disabled:e.canClick},on:{click:e.getCode}},[e._v("\n          "+e._s(e.buttonMessage)+"\n        ")])],1)],1),e._v(" "),r("el-form-item",{staticStyle:{"margin-top":"20px"}},[r("el-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("注册用户")])],1)],1)],1)},o=[],s=r("137c"),i=r("c24f"),n={name:"Index",components:{Mallki:s["a"]},data:function(){var e=function(e,t,r){Object(i["c"])("username",t).then((function(e){!1===e.data?r(new Error("账号已被注册,请选择其他账号！")):!0===e.data?r():r(new Error("服务器错误！"))}))},t=function(e,t,r){Object(i["c"])("mobile",t).then((function(e){!1===e.data?r(new Error("手机号已被注册！")):!0===e.data?r():r(new Error("服务器错误！"))}))};return{rform:{username:"",password:"",mobile:"",validcode:""},canClick:!1,totalTime:60,buttonMessage:"获取验证码",rules:{username:[{required:!0,message:"账号不能为空！",trigger:"blur"},{validator:e,trigger:"blur"}],password:[{required:!0,message:"密码不能为空！",trigger:"blur"},{pattern:/^[a-zA-Z]([-_a-zA-Z0-9]{5,17})$/,message:"以字母开头，长度在6-18之间， 只能包含字符、数字和下划线",trigger:"blur"}],mobile:[{required:!0,message:"手机号不能为空！",trigger:"blur"},{pattern:/^0{0,1}(13[0-9]|15[7-9]|153|156|18[7-9])[0-9]{8}$/,message:"请输入正确的手机号码!",trigger:["blur","change"]},{validator:t,trigger:"blur"}],validcode:[{required:!0,message:"验证码不能为空！",trigger:"blur"}]},loading:!1}},methods:{getCode:function(){var e=this,t=this;t.$refs.rform.validateField("mobile",(function(r){""==r&&Object(i["j"])(e.rform.mobile).then((function(e){t.buttonMessage="获取成功",t.$store.dispatch("settings/changeSetting",{key:"smsTime",value:(new Date).getTime()}),t.canClick=!0,t.countDown()}))}))},submit:function(){var e=this;this.$refs.rform.validate((function(t){t&&(e.loading=!0,Object(i["r"])(e.rform).then((function(t){t&&(e.$message({type:"success",message:"注册成功！"}),e.loading=!1);var r=e;setTimeout((function(){r.$router.push({path:"/login"})}),1e3)})).catch((function(t){e.$message({type:"success",message:"注册失败，请重试！"}),e.loading=!1})))}))},countDown:function(){var e=this;if(this.canClick){this.buttonMessage=this.totalTime+"s后重新发送";var t=window.setInterval((function(){e.totalTime--,e.buttonMessage=e.totalTime+"s后重新发送",e.totalTime<0&&(window.clearInterval(t),e.canClick=!1,e.buttonMessage="获取验证码",e.totalTime=60)}),1e3)}}},created:function(){var e=this.$store.getters.smsTime;if(e){var t=((new Date).getTime()-e)/1e3;t<60&&(this.canClick=!0,this.totalTime=Math.floor(60-t),this.countDown())}}},l=n,c=(r("83ee"),r("2877")),m=Object(c["a"])(l,a,o,!1,null,"4254def6",null);t["default"]=m.exports}}]);